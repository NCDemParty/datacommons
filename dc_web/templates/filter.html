{% extends "base.html" %}
{% load media %}

{% block bodyclass %}filteredSearch{% endblock %}

{% block sidebar %}
    <div id="datafilter" class="module">
		<h2>Search for</h2>
		<span class="helper">Add additional fields to refine your search.</span>
		<form>
			<select id="filterselect">
				<option value="">Select a filter to add...</option>
		    </select>
			<ul id="filters"></ul>
		</form>
	</div>
    <div class="module partner">
        <h2>Partnered With</h2>
        <a id="openSecrets" href="http://opensecrets.org"><big>OpenSecrets.org</big><small>Center for Responsive Politics</small></a>
        <a id="nimsp" href="http://followthemoney.org"><big>National Institute on Money in State Politics</big><small>Follow The Money</small></a>
        <div class="clear"></div>
    </div>
{% endblock %}

{% block content %}
    <div class="module tableButtons">
	    <a id="previewData" href="#">Preview Data</a>
	    <a id="downloadData" href="#">Download </a>
    </div>
    <div class="module">
	    <div id="tableScroll">
	        <p>Displaying <span id="previewCount"></span> of <span id="recordCount"></span> records</p>
            <table id="mainTable">
            	<thead>
            		<tr id="titles">
                   		<th>Type</th>
                   		<th>Date</th>
                   		<th>Amount</th>
                   		<th>Contributor</th>
                   		<th>Location</th>
                   		<th>Employer</th>
                   		<th>Recipient</th>
                   	</tr>
                </thead>
                <tbody></tbody>
            </table>
            <!--
            <div class="paginator">
            	<span>Page</span>
            	<a href="#">1</a>
				<a href="#">2</a>
				<a href="#">3</a>
			</div>
			-->
		</div>
		<div id="nodata">No contributions match your filter criteria.</div>
		<div id="loading">Loading a few records to preview your filter...</div>
		<div id="downloading" class="dialog">
			<p>
				Complex queries may take a few minutes to process.
				You may close this dialog once your download completes.
			</p>
		</div>
		<div id="nofilters" class="dialog">
			<p>
				We appreciate your zeal for transparency, but our database can't handle the load.
				Please add at least one filter.
			</p>
		</div>
        <p>All data licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/us/">Creative Commons BY-NC-SA</a> license. By downloading data, you are agreeing to the terms of the license.</p>
        <p>Federal records must be attributed to <a href="http://opensecrets.org">OpenSecrets.org</a>.</p>
        <p>State records must be attributed to <a href="http://followthemoney.org">FollowTheMoney.org</a>.</p>
        <div class="clear"></div>
	</div>
    
    {% if entity %}
        <script type="text/javascript">
            $().ready(function() {
                var fieldPrototype = TD.DataFilter.registry['{{ entity.role }}'];
                if (fieldPrototype != undefined) {
                    var field = TD.DataFilter.addField(fieldPrototype.instance());
                    field.addSelection('{{ entity.id }}', '{{ entity.name }}');
                }
            });
        </script>
    {% endif %}
    
{% endblock %}