{% extends "base.html" %}
{% load media %}

{% block bodyclass %}filteredSearch{% endblock %}

{% block sidebar %}
	<div id="datafilter">
		<form>
			<select id="filterselect">
				<option value="">Select a filter to add...</option>
			</select>
			<ul id="filters"></ul>
		</form>
	</div>
    <div class="module">
        <h2>Filtered Search</h2>
            <a href="#" id="id_refreshdata">Refresh Data</a>
        <span class="helper">You can fill out the filters below to refine your search.</span>
        <form id="filterForm" action="." method="get">
            <ul>
                <li>
                    <select id="id_filter" name="filter">
                        <option value="">Select a filter to add...</option>
                    </select>
                    <!-- <a class="plus-button" href="#" title="Add Filter">Add Filter</a> -->
                </li>
            </ul>
        </form>
    </div>
    <div class="module partner">
        <h2>Partnered With</h2>
        <a id="openSecrets" href="#"><big>OpenSecrets.org</big><small>Center for Responsive Politics</small></a>
        <a id="nimsp" href="#"><big>National Institute on Money in State Politics</big><small>Follow The Money</small></a>
        <div class="clear"></div>
    </div>
{% endblock %}

{% block content %}

    <div id="module_directions">
        <div class="module whitebox">
    		<h3>Using Filtered Search</h3>
    		<ol id="instructionSteps">
    			<li>
    				<div class="instruct1">
    					<span class="instructions">Pick A Field</span>
    					<p class="text">Lorum ipsum dolor emut</p>
    				</div>
    				<img src="{% media_url %}/images/pickfield-image.png" alt="description" title="pick a field"/>
    				<div class="clear"></div>
    			</li>
    			<li>
    				<div class="instruct2">
    					<span class="instructions">Add Filter</span>
    					<p class="text">Lorum ipsum dolor emut</p>
    				</div>
    				<img src="{% media_url %}/images/addfilter-image.png" alt="description" title="add filter"/>
    				<div class="clear"></div>
    			</li>
    			<li>
    				<div class="instruct3">
    					<span class="instructions">Data Updates</span>
    					<p class="text">Lorum ipsum dolor emut</p>
    				</div>
    				<img src="{% media_url %}/images/dataupdates-image.png" alt="description" title="data updates"/>
    				<div class="clear"></div>
    			</li>
    		</ol>
    	</div>
    </div>

    <div id="module_loading">
        <img src="{% media_url %}/images/ajax-loader.gif">
    </div>

    <div id="module_transactions">
        <div class="module tableButtons">
            <a id="downloadDataSet" href="#">Download Data Set</a>
            <a id="reportError" href="#">Report Error</a>
        </div>
        <div class="module">
            <!--
            <div id="tableMetadata">
                <div id="matches">
                    <span>350,000,000 Matches</span>
                </div>
                <div class="perPage">
                   <span>Matches Per Page:</span>
                   <a href="#">25</a>
                   <a href="#">50</a>
                   <a href="#">100</a>
                </div>
            </div>
            -->
            <div id="tableScroll">
                <table id="mainTable">
                    <thead>
                        <tr id="titles">
                            <th>Type</th>
                            <th>Date Stamp</th>
                            <th>Amount</th>
                            <th>Contributor</th>
                            <th>Location</th>
                            <th>Recipient</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <!--
                <div class="paginator">
                    <span>Page</span>
                    <a href="#">1</a>
                    <a href="#">2</a>
                    <a href="#">3</a>
                </div>
                -->
            </div>
        </div>
        <p>All data licensed under the <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/us/">Creative Commons BY-NC-SA</a> license. By downloading data, you are agreeing to the terms of the license.</p>
        <p>Federal records must be attributed to <a href="http://opensecrets.org">OpenSecrets.org</a>.</p>
        <p>State records must be attributed to <a href="http://followthemoney.org">FollowTheMoney.org</a>.</p>
    </div>
    
    {% if entity %}
        <script type="text/javascript">
            $().ready(function() {
                var fieldPrototype = TD.DataFilter.registry['{{ entity.role }}'];
                if (fieldPrototype != undefined) {
                    var field = TD.DataFilter.addField(fieldPrototype.instance());
                    field.addSelection('{{ entity.id }}', '{{ entity.name }}');
                }
            });
        </script>
    {% endif %}
    
{% endblock %}